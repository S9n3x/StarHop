syntax = "proto3";

package pb;

option go_package = "/pb";

service HopTunnel {
  rpc Stream (stream HopPacket) returns (stream HopPacket);
}

// 基础数据的包
// 还用于代理数据传输
message HopPacket {
  bytes data = 1;
}

// 注册包
message RegisterPacket {
    string device = 1;
    string port = 2;
    string version = 3;
}

// 节点信息
message HopNodePacket {
    string device = 1;
    string version = 2;
    string address = 3;
}

// 节点列表
message HopNodeListPacket {
    repeated HopNodePacket nodes = 1;
}